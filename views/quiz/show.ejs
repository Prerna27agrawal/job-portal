<!DOCTYPE html>
<html lang="en">

<head>
    
    <title>WeHire</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <!-- <link rel="stylesheet" href="path/to/intlTelInput.css"> -->
    <link ref="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
    <script type="text/javascript"
        src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=places&key=AIzaSyCXFJ-lc7cHHcEklG2_oIhTnPKTWsLwHEU"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
    <style>
        .qstn {
            background-color: rgb(96, 134, 168);
            color:white;
            border-radius: 25px;
            margin-bottom: 0%;
            padding:0.2%;
        }
        .qstn h5{
            margin-left: 15px;
        }
        .answer {
            background-color: rgb(242, 248, 248);
            border-radius: 25px;
            margin-top: 0.5%;
            margin-bottom:40px;
            padding:1%;
        }
        #quiztitle{
           color:teal;
            margin-bottom: 40px;
        }
    </style>
    
</head>

<body onload="timeout()">
      

<!-- <script type="text.javascript">
    function noback()
    {
        window.history.forward();
    }
    setTimeout(function(){preback()},0);
    window.onunload = function(){null};
</script> -->
<script type="text/javascript">
      function timeout()
      {
          var hour = Math.floor(timeLeft/3600);
          var rem1 = Math.floor(timeLeft%3600);
          var minute= Math.floor(rem1/60);
          var rem2= Math.floor(rem1%60);
          var second = rem2;
          var hrs=checktime(hour);
          var min=checktime(minute);
          var sec=checktime(second);
          if(timeLeft <= 0)
          {
              clearTimeout(tm);
              setTimeout(() => {'document.quiz.submit()'}, 1);
               document.getElementById("form1").submit();
          }
          else{
            document.getElementById("time").innerHTML= hrs+":"+min+":"+sec;
          }
          //seconds dec
         timeLeft--;
          var tm= setTimeout(function(){timeout()},1000);
      }
      function checktime(msg)
      {
          if(msg<10)
          {
              msg="0"+msg;
          }
          return msg;
    }
</script>
<script type="text/javascript">
//     function finishpage()
//    {
//      //alert("unload event detected!");
//     setTimeout(() => {'document.quiz.submit()'}, 1);  
//      //document.quiz.submit();
//    }
//        window.onbeforeunload= function(finishpage) {
//          return ;
//     // setTimeout(() => {'document.quiz.submit()'}, 1);
    
//    }
// $(window).on('beforeunload',function(){
//     finishpage();
//     return "Bye";
// });
// window.addEventListener('beforeunload', function (e) {
//   e.returnValue = 'You will loose';
//   return finishpage;
// });
   </script>
<div class="container">
    <h1 id="quiztitle"><%= quiz.title %><div id="time" style="float:right">timeout</div></h1>
   <script type="text/javascript">
       var timeLeft1="<%= quiz.time %>";
       var timeLeft=timeLeft1*60;
   </script>
    <!-- <h1>Time: <h2 id="time">200</h2></h1> -->
    <form id="form1" name="quiz" action="/quiz/<%= quiz._id %>/takequiz" method="POST">
        <% function shuffleArray(array) { 
                    for (var i = array.length - 1; i > 0; i--) { 
                        
                        // Generate random number 
                        var j = Math.floor(Math.random() * (i + 1)); 
                                        
                        var temp = array[i]; 
                        array[i] = array[j]; 
                        array[j] = temp; 
                    } 
                            
                    return array; 
        } %>
        <% quiz.questions.forEach(function(question){%>
        <div class="row">
            <div class="col-xs-8 qstn">
                <h5>Q. <%= question.description %> ?</h5>
            </div>
            <div class="col-xs-8 answer">
                <% var aftershuffle = shuffleArray(question.options); %>
                <% aftershuffle.forEach(function(option){ %>
                <input type="radio" name="<%= question._id %>" value="<%= option %>"> <%= option %>
                <input type="radio" style="display: none;" name="<%= question._id %>" value="" checked>
                <br>
                <% }); %>
            </div>
        </div>
<%});%>
<center><button type="submit" value="submit" class="btn btn-success pull-right">Submit</button></center>
</form>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>